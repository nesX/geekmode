---
import { formatPrice } from '../../utils/format';

const { product, priority = false } = Astro.props;
const imageUrl = product.images[0] || '/images/camiseta-template.png';
---

<article class="group bg-surface rounded-xl border border-white/10 overflow-hidden hover:border-primary/50 transition-all duration-300">
  <a href={`/producto/${product.slug}`} class="block">
    <div class="aspect-square bg-background overflow-hidden relative">
      <img
        src={imageUrl}
        alt={product.name}
        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500 opacity-90 group-hover:opacity-100"
        loading={priority ? "eager" : "lazy"}
        fetchpriority={priority ? "high" : undefined}
        width="400"
        height="400"
      />
      {product.price > 100000 && (
        <span class="absolute top-2 right-2 bg-primary text-white text-[10px] font-bold px-2 py-1 rounded uppercase shadow-[0_0_10px_rgba(139,92,246,0.5)]">
          Premium
        </span>
      )}
    </div>
    <div class="p-4">
      <p class="text-[10px] text-text-muted uppercase tracking-wider mb-1 font-semibold">{product.category}</p>
      <h3 class="font-bold text-text-main group-hover:text-primary transition-colors line-clamp-1">
        {product.name}
      </h3>
      <p class="text-lg font-bold text-secondary mt-2">
        {formatPrice(product.price)}
      </p>
    </div>
  </a>
</article>
